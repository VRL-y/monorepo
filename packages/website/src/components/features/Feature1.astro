---
// Fundations
import Link from "@/components/fundations/elements/Link.astro";
import Text from "@/components/fundations/elements/Text.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
// Config
import { EXTERNAL_LINKS } from "@/config/external-links";
// Icons
import Tools from "@/components/fundations/icons/Tools.astro";
import Plus from "@/components/fundations/icons/Plus.astro";
import Cursor from "@/components/fundations/icons/Cursor.astro";
import Camera from "@/components/fundations/icons/Camera.astro";
import Filters from "@/components/fundations/icons/Filters.astro";
import Persist from "@/components/fundations/icons/Persist.astro";
import Stacked from "@/components/fundations/icons/Stacked.astro";
import WaveSquare from "@/components/fundations/icons/WaveSquare.astro";
import ChevronRight from "@/components/fundations/icons/ChevronRight.astro";
import ArrowIteration from "@/components/fundations/icons/ArrowIteration.astro";

interface Props {
  title?: string;
  description?: string;
  items?: {
    title: string;
    description: string;
  }[];
}

const {
  title = "KI-Automatisierung für Ihre Praxis",
  description = "Von der intelligenten Patientenanfragen-Verwaltung bis zur DSGVO-konformen Automatisierung – wir entwickeln maßgeschneiderte Lösungen, die Ihnen Zeit zurückgeben und Ihre Praxis zukunftssicher machen.",
  items = []
} = Astro.props;

const data = [
  {
    icon: "Filters",
    category: "Praxis-Anfragen-Autopilot",
    text: "Automatische DSGVO-konforme Bearbeitung von Patientenanfragen mit intelligenter Kategorisierung und sofortiger Antwort.",
  },
  {
    icon: "WaveSquare",
    category: "Terminmanagement-KI",
    text: "Intelligente Terminplanung mit Wartelisten-Optimierung und automatischen Erinnerungen.",
  },
  {
    icon: "ArrowIteration",
    category: "Dokumentations-Assistent",
    text: "KI-gestützte Unterstützung bei der Therapiedokumentation und Berichtserstellung.",
  },
  {
    icon: "Plus",
    category: "DSGVO-Compliance-Check",
    text: "Automatische Überprüfung und Dokumentation aller Datenschutzprozesse in Ihrer Praxis.",
  },
  {
    icon: "Cursor",
    category: "PVS-Integration",
    text: "Nahtlose Anbindung an Ihre Praxisverwaltungssoftware (Elefant, Psyprax, Epikur).",
  },
  {
    icon: "Persist",
    category: "Workflow-Automatisierung",
    text: "Optimierung wiederkehrender Verwaltungsaufgaben durch maßgeschneiderte Automatisierung.",
  },
  {
    icon: "Camera",
    category: "TI-Support & Beratung",
    text: "Fachkundige Unterstützung bei der Telematikinfrastruktur und digitalen Gesundheitsanwendungen.",
  },
  {
    icon: "Stacked",
    category: "Praxis-Analytics",
    text: "Datenbasierte Einblicke in Ihre Praxiseffizienz mit automatisierten Reports und Optimierungsvorschlägen.",
  },
];
---
<section>
  <Wrapper variant="standard" class="py-12 border-t border-vrly-neutral-200">
    <div>
      <Text
        class="span"
        variant="textXS"
        data-aos="fade-down"
        data-aos-duration="1000"
        class="flex items-center font-medium uppercase text-vrly-slate-400 gap-2"
      >
        <Tools size="sm" class="text-vrly-green-600" />
        Spezialisiert auf Psychotherapiepraxen
      </Text>
      <Text
        tag="h2"
        variant="displayMD"
        data-aos="fade-up"
        data-aos-duration="1000"
        class="mt-8 font-semibold tracking-tight text-vrly-slate-500"
      >
        {title}
      </Text>
      <Text
        tag="p"
        variant="textBase"
        data-aos="fade-up"
        data-aos-duration="1500"
        class="mt-2 text-base text-vrly-slate-400 md:text-balance"
      >
        {description}
      </Text>
      <div
        data-aos="fade-up"
        data-aos-duration="2000"
        class="flex flex-col sm:flex-row items-start sm:items-center mt-8 gap-4"
      >
        <Link
          size="base"
          variant="default"
          href={EXTERNAL_LINKS.workflowAudit}
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Kostenlosen Workflow-Audit anfordern (öffnet in neuem Tab)"
          gap="xs"
          class="group bg-vrly-blue-500 hover:bg-vrly-blue-600 text-white border-0"
        >
          Kostenlosen Workflow-Audit anfordern
          <ChevronRight
            size="sm"
            class="duration-300 easy-out-in group-hover:translate-x-2"
          />
        </Link>
        <Link
          size="base"
          variant="muted"
          href="/leistungen"
          gap="xs"
          class="group text-vrly-slate-500 hover:text-vrly-blue-600"
        >
          Alle Leistungen entdecken
          <ChevronRight
            size="sm"
            class="duration-300 easy-out-in group-hover:translate-x-2"
          />
        </Link>
      </div>
    </div>
    
    {items && items.length > 0 ? (
      <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8">
        {items.map((item) => (
          <div class="bg-white p-6 rounded-xl shadow-md border border-vrly-neutral-200 hover:shadow-lg transition-shadow">
            <h3 class="text-lg font-semibold text-vrly-slate-500 mb-3">{item.title}</h3>
            <p class="text-vrly-slate-400">{item.description}</p>
          </div>
        ))}
      </div>
    ) : (
      <ul class="mt-12 overflow-hidden shadow-xl grid gap-px bg-vrly-neutral-200 outline outline-vrly-neutral-200 rounded-xl sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4">
        {data.map((section) => (
          <li class="group flex h-full justify-between flex-col gap-12 lg:gap-24 bg-white px-5 relative pt-6 pb-[30px] transition-all md:min-h-[180px] cursor-pointer hover:bg-vrly-neutral-100">
            <a class="absolute inset-0" href="/leistungen" aria-label={`Mehr über ${section.category} erfahren`} />
    
            <div>
              <div class="flex">
                <div class="flex p-2 bg-vrly-green-500 rounded-lg transition-all duration-300 text-white group-hover:bg-vrly-blue-500">
                  {section.icon === "Filters" && <Filters size="base" />}
                  {section.icon === "WaveSquare" && <WaveSquare size="base" />}
                  {section.icon === "ArrowIteration" && <ArrowIteration size="base" />}
                  {section.icon === "Plus" && <Plus size="base" />}
                  {section.icon === "Cursor" && <Cursor size="base" />}
                  {section.icon === "Persist" && <Persist size="base" />}
                  {section.icon === "Camera" && <Camera size="base" />}
                  {section.icon === "Stacked" && <Stacked size="base" />}
                </div>
              </div>
    
              <div class="mt-4">
                <h3 class="font-semibold leading-6 text-vrly-slate-500 mb-2">{section.category}</h3>
                <p class="text-sm text-vrly-slate-400 leading-relaxed">{section.text}</p>
              </div>
            </div>
    
            <Text
              tag="p"
              variant="textSM"
              class="flex items-center font-medium gap-2 text-vrly-blue-600 group-hover:text-vrly-blue-700"
            >
              Mehr erfahren
              <ChevronRight
                size="sm"
                class="duration-300 ease-out group-hover:translate-x-2"
              />
            </Text>
          </li>
        ))}
      </ul>
    )}
  </Wrapper>
</section>
